{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","x","localStorage","getItem","xObject","JSON","parse","hashMap","logo","logoType","url","request","Promise","resolve","reject","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","response","send","bodyBackgroundUrl","picCopyright","copyrightLink","document","ready","media","window","matchMedia","matches","BASE_URL","then","res","console","log","images","i","length","copyright","copyrightlink","attr","picIndex","text","trigger","remove","css","removePrefix","replace","render","forEach","node","index","$li","toUpperCase","insertBefore","on","e","stopPropagation","splice","prompt","indexOf","push","children","renderButtonColor","bind","onbeforeunload","string","stringify","setItem"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,SAAS,GAAGC,CAAC,CAAC,WAAD,CAAnB;AACA,IAAMC,OAAO,GAAGF,SAAS,CAACG,IAAV,CAAe,SAAf,CAAhB;AAEA,IAAMC,CAAC,GAAGC,YAAY,CAACC,OAAb,CAAqB,GAArB,CAAV,EAAoC;;AAEpC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWL,CAAX,CAAhB;AACA,IAAMM,OAAO,GAAGH,OAAO,IAAI,CACvB;AAACI,EAAAA,IAAI,EAAC,GAAN;AAAWC,EAAAA,QAAQ,EAAC,MAApB;AAA2BC,EAAAA,GAAG,EAAC;AAA/B,CADuB,EAEvB;AAACF,EAAAA,IAAI,EAAC,GAAN;AAAWC,EAAAA,QAAQ,EAAC,MAApB;AAA4BC,EAAAA,GAAG,EAAC;AAAhC,CAFuB,EAGvB;AAACF,EAAAA,IAAI,EAAC,GAAN;AAAWC,EAAAA,QAAQ,EAAC,MAApB;AAA4BC,EAAAA,GAAG,EAAC;AAAhC,CAHuB,EAIvB;AAACF,EAAAA,IAAI,EAAC,GAAN;AAAWC,EAAAA,QAAQ,EAAC,MAApB;AAA4BC,EAAAA,GAAG,EAAC;AAAhC,CAJuB,CAA3B,EAMA;;AACA;;;;;;;;;;;;;;;;AAgBA;;AACA,SAASC,OAAT,GAAkB;AAChB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;AACpC,QAAMC,GAAG,GAAG,IAAIC,cAAJ,EAAZ;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAAS,KAAT,EACS,6GADT,EACwH,IADxH;;AAEAF,IAAAA,GAAG,CAACG,kBAAJ,GAAyB,YAAU;AACjC,UAAGH,GAAG,CAACI,UAAJ,KAAmB,CAAnB,IAAwBJ,GAAG,CAACK,MAAJ,KAAc,GAAzC,EAA6C;AAC3CP,QAAAA,OAAO,CAACR,IAAI,CAACC,KAAL,CAAWS,GAAG,CAACM,QAAf,CAAD,CAAP;AACD;AACF,KAJD;;AAKAN,IAAAA,GAAG,CAACO,IAAJ;AACD,GAVM,CAAP;AAWD;;AAED,IAAIC,iBAAiB,GAAG,EAAxB;AACA,IAAIC,YAAY,GAAG,EAAnB;AACA,IAAIC,aAAa,GAAG,EAApB,EACA;;AACA3B,CAAC,CAAC4B,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAI;AAClB,MAAMC,KAAK,GAAGC,MAAM,CAACC,UAAP,CAAkB,mBAAlB,CAAd;;AACA,MAAIF,KAAK,CAACG,OAAV,EAAmB;AAAE;AACjB,QAAMC,QAAQ,GAAG,sBAAjB;AACArB,IAAAA,OAAO,GAAGsB,IAAV,CAAe,UAAAC,GAAG,EAAE;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,GAAG,CAACG,MAA3B;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,GAAG,CAACG,MAAJ,CAAWE,MAA9B,EAAsCD,CAAC,EAAvC,EAA0C;AACtCf,QAAAA,iBAAiB,CAACe,CAAD,CAAjB,GAAuBN,QAAQ,GAAGE,GAAG,CAACG,MAAJ,CAAWC,CAAX,EAAc5B,GAAhD;AACAc,QAAAA,YAAY,CAACc,CAAD,CAAZ,GAAkBJ,GAAG,CAACG,MAAJ,CAAWC,CAAX,EAAcE,SAAhC;AACAf,QAAAA,aAAa,CAACa,CAAD,CAAb,GAAmBJ,GAAG,CAACG,MAAJ,CAAWC,CAAX,EAAcG,aAAjC;AACH;;AACD3C,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB4C,IAArB,CAA0B,MAA1B,YAAoCjB,aAAa,CAACkB,QAAD,CAAjD;AACA7C,MAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2B8C,IAA3B,WAAmCpB,YAAY,CAACmB,QAAD,CAA/C;AACA7C,MAAAA,CAAC,CAAC4B,QAAD,CAAD,CAAYmB,OAAZ,CAAoB,WAApB;AACH,KAVD;AAWH,GAbD,MAaK;AACD/C,IAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBgD,MAAnB;AACAhD,IAAAA,CAAC,CAAC,MAAD,CAAD,CAAUiD,GAAV,CAAc,kBAAd,EAAiC,yCAAjC;AACH;AACJ,CAnBD;;AAsBA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACtC,GAAD,EAAQ;AACzB,SAAOA,GAAG,CAACuC,OAAJ,CAAY,UAAZ,EAAwB,EAAxB,EACFA,OADE,CACM,SADN,EACiB,EADjB,EAEFA,OAFE,CAEM,MAFN,EAEc,EAFd,EAGFA,OAHE,CAGM,MAHN,EAGc,EAHd,CAAP,CADyB,CAIA;AAC5B,CALD;;AAOA,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAK;AAChBrD,EAAAA,SAAS,CAACG,IAAV,CAAe,eAAf,EAAgC8C,MAAhC;AACAvC,EAAAA,OAAO,CAAC4C,OAAR,CAAgB,UAACC,IAAD,EAAOC,KAAP,EAAe;AAC3B,QAAMC,GAAG,GAAGxD,CAAC,+GAIekD,YAAY,CAACI,IAAI,CAAC1C,GAAN,CAAZ,CAAuB,CAAvB,EAA0B6C,WAA1B,EAJf,yDAKeP,YAAY,CAACI,IAAI,CAAC1C,GAAN,CAL3B,+PAAD,CAcV8C,YAdU,CAcGzD,OAdH,CAAZ;AAeAuD,IAAAA,GAAG,CAACG,EAAJ,CAAO,OAAP,EAAgB,YAAI;AAChB5B,MAAAA,MAAM,CAACZ,IAAP,CAAYmC,IAAI,CAAC1C,GAAjB;AACH,KAFD;AAGA4C,IAAAA,GAAG,CAACG,EAAJ,CAAO,OAAP,EAAgB,QAAhB,EAA0B,UAACC,CAAD,EAAK;AAC3BA,MAAAA,CAAC,CAACC,eAAF,GAD2B,CACP;;AACpBpD,MAAAA,OAAO,CAACqD,MAAR,CAAeP,KAAf,EAAsB,CAAtB;AACAH,MAAAA,MAAM;AACT,KAJD;AAKH,GAxBD;AAyBH,CA3BD;;AA6BAA,MAAM;AACNpD,CAAC,CAAC,YAAD,CAAD,CACK2D,EADL,CACQ,OADR,EACgB,YAAI;AACZ,MAAI/C,GAAG,GAAGmB,MAAM,CAACgC,MAAP,CAAc,UAAd,CAAV;;AACA,MAAGnD,GAAG,CAACoD,OAAJ,CAAY,MAAZ,MAAwB,CAA3B,EAA6B;AACzBpD,IAAAA,GAAG,GAAG,aAAaA,GAAnB;AACH;;AACDyB,EAAAA,OAAO,CAACC,GAAR,CAAY1B,GAAZ;AACAH,EAAAA,OAAO,CAACwD,IAAR,CAAa;AACTtD,IAAAA,QAAQ,EAAE,MADD;AAETC,IAAAA,GAAG,EAAEA;AAFI,GAAb;AAIAwC,EAAAA,MAAM;AACT,CAZL;AAaApD,CAAC,CAAC,QAAD,CAAD,CACC2D,EADD,CACI,OADJ,EACY,YAAI;AACZtB,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAEH,CAJD;AAMA;;;;;;;;;AAQM;;AAENtC,CAAC,CAAC,QAAD,CAAD,CAAY2D,EAAZ,CAAe,OAAf,EAAwB,YAAI;AACxB,MAAG3D,CAAC,CAAC,QAAD,CAAD,CAAY4C,IAAZ,CAAiB,OAAjB,MAA8B,UAAjC,EAA4C;AACxC5C,IAAAA,CAAC,CAAC,QAAD,CAAD,CAAY4C,IAAZ,CAAiB,OAAjB,EAAyB,QAAzB;AACA5C,IAAAA,CAAC,CAAC,SAAD,CAAD,CAAa4C,IAAb,CAAkB,OAAlB,EAA0B,UAA1B;AAEA5C,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiB4C,IAAjB,CAAsB,QAAtB,EAA+B,yBAA/B,EACCsB,QADD,CACU,OADV,EACmBtB,IADnB,CACwB,MADxB,EAC+B,IAD/B;AAGH;AACJ,CATD;AAUA5C,CAAC,CAAC,SAAD,CAAD,CAAa2D,EAAb,CAAgB,OAAhB,EAAyB,YAAI;AACzB,MAAG3D,CAAC,CAAC,SAAD,CAAD,CAAa4C,IAAb,CAAkB,OAAlB,MAA+B,UAAlC,EAA6C;AACzC5C,IAAAA,CAAC,CAAC,SAAD,CAAD,CAAa4C,IAAb,CAAkB,OAAlB,EAA0B,QAA1B;AACA5C,IAAAA,CAAC,CAAC,QAAD,CAAD,CAAY4C,IAAZ,CAAiB,OAAjB,EAAyB,UAAzB;AAEA5C,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiB4C,IAAjB,CAAsB,QAAtB,EAA+B,+BAA/B,EACCsB,QADD,CACU,OADV,EACmBtB,IADnB,CACwB,MADxB,EAC+B,GAD/B;AAEH;AACJ,CARD;AAUA,IAAIC,QAAQ,GAAG,CAAf;;AACA,SAASsB,iBAAT,GAA4B;AACxB,MAAGtB,QAAQ,KAAK,CAAhB,EAAkB;AACd7C,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAeiD,GAAf,CAAmB,SAAnB,EAA6B,KAA7B;AACAjD,IAAAA,CAAC,CAAC,OAAD,CAAD,CAAWiD,GAAX,CAAe,SAAf,EAAyB,GAAzB;AACH,GAHD,MAGM,IAAGJ,QAAQ,KAAK,CAAhB,EAAkB;AACpB7C,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAeiD,GAAf,CAAmB,SAAnB,EAA6B,GAA7B;AACAjD,IAAAA,CAAC,CAAC,OAAD,CAAD,CAAWiD,GAAX,CAAe,SAAf,EAAyB,KAAzB;AACH,GAHK,MAGD;AACDjD,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAeiD,GAAf,CAAmB,SAAnB,EAA6B,GAA7B;AACAjD,IAAAA,CAAC,CAAC,OAAD,CAAD,CAAWiD,GAAX,CAAe,SAAf,EAAyB,GAAzB;AACH;AACJ,EAED;;;AAEAjD,CAAC,CAAC4B,QAAD,CAAD,CAAYwC,IAAZ,CAAiB,WAAjB,EAA6B,YAAK;AAC9B;AACApE,EAAAA,CAAC,CAAC,MAAD,CAAD,CAAUiD,GAAV,CAAc,kBAAd,iBAAyCxB,iBAAiB,CAACoB,QAAD,CAA1D;AACAsB,EAAAA,iBAAiB,GAHa,CAI9B;;AACAnE,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAe2D,EAAf,CAAkB,OAAlB,EAA0B,YAAI;AAC1B,QAAGd,QAAQ,GAAG,CAAd,EAAgB;AACZA,MAAAA,QAAQ;AACRsB,MAAAA,iBAAiB;AACjBnE,MAAAA,CAAC,CAAC,MAAD,CAAD,CAAUiD,GAAV,CAAc,kBAAd,iBAAyCxB,iBAAiB,CAACoB,QAAD,CAA1D;AACA7C,MAAAA,CAAC,CAAC4B,QAAD,CAAD,CAAYmB,OAAZ,CAAoB,gBAApB;AACH;AACJ,GAPD,EAL8B,CAa9B;;AACA/C,EAAAA,CAAC,CAAC,OAAD,CAAD,CAAW2D,EAAX,CAAc,OAAd,EAAsB,YAAI;AACtB,QAAGd,QAAQ,GAAG,CAAd,EAAgB;AACZA,MAAAA,QAAQ;AACRsB,MAAAA,iBAAiB;AACjBnE,MAAAA,CAAC,CAAC,MAAD,CAAD,CAAUiD,GAAV,CAAc,kBAAd,iBAAyCxB,iBAAiB,CAACoB,QAAD,CAA1D;AACA7C,MAAAA,CAAC,CAAC4B,QAAD,CAAD,CAAYmB,OAAZ,CAAoB,gBAApB;AACH;AACJ,GAPD;AAQH,CAtBD;AAyBA/C,CAAC,CAAC4B,QAAD,CAAD,CAAYwC,IAAZ,CAAiB,gBAAjB,EAAkC,YAAK;AACnCpE,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqB4C,IAArB,CAA0B,MAA1B,YAAoCjB,aAAa,CAACkB,QAAD,CAAjD;AACA7C,EAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2B8C,IAA3B,WAAmCpB,YAAY,CAACmB,QAAD,CAA/C;AACH,CAHD,GAKA;;AACAd,MAAM,CAACsC,cAAP,GAAwB,YAAK;AACzB,MAAMC,MAAM,GAAG/D,IAAI,CAACgE,SAAL,CAAe9D,OAAf,CAAf;AACAL,EAAAA,YAAY,CAACoE,OAAb,CAAqB,GAArB,EAA0BF,MAA1B;AACH,CAHD","file":"main.d41dda4e.js","sourceRoot":"..\\src","sourcesContent":["const $siteList = $('.siteList')\nconst $lastLi = $siteList.find('li.last')\n\nconst x = localStorage.getItem('x') //本地存储增加的站点\n\nconst xObject = JSON.parse(x)\nconst hashMap = xObject || [\n    {logo:\"G\", logoType:'text',url:\"https://github.com/\"},\n    {logo:\"G\", logoType:\"text\", url:\"https://www.google.com/\"},\n    {logo:\"B\", logoType:\"text\", url:\"https://www.bilibili.com/\"},\n    {logo:\"Z\", logoType:\"text\", url:\"https://www.zhihu.com/\"},\n]\n// 1直接用现成url\n/* const getDateStr = (DayCount) =>{ \n    const date = new Date();\n    date.setDate(date.getDate()+DayCount);//获取DayCount天后的日期\n    const y = date.getFullYear().toString(); \n    const m = (date.getMonth()+1)<10 ? \"0\"+(date.getMonth()+1).toString() : (date.getMonth()+1).toString();//获取当前月份的日期，不足10补0\n    const d = date.getDate()<10 ? \"0\"+date.getDate().toString() : date.getDate().toString();//获取当前几号，不足10补0\n    return y+m+d; \n\n    //获取日期对应的bing背景图\n    for(let i=0,j=0;i<6;i++,j--){\n        dateList[i] = getDateStr(j)\n        bodyBackgroundUrl[i] = `https://tupian.sioe.cn/b/bing-home-image/pic/${dateList[i]}.jpg`\n    }\n\n    console.log(dateList)    \n} */\n// 2使用接口获取\nfunction request(){\n  return new Promise((resolve, reject)=>{\n    const xhr = new XMLHttpRequest()\n    xhr.open('GET', \n             'https://jsonp.afeld.me/?url=https%3A%2F%2Fcn.bing.com%2FHPImageArchive.aspx%3Fformat%3Djs%26idx%3D0%26n%3D7', true)\n    xhr.onreadystatechange = function(){\n      if(xhr.readyState === 4 && xhr.status ===200){\n        resolve(JSON.parse(xhr.response))\n      }\n    }\n    xhr.send()\n  })\n}\n\nlet bodyBackgroundUrl = []\nlet picCopyright = []\nlet copyrightLink = []\n//调用request bing背景图\n$(document).ready(()=>{\n    const media = window.matchMedia(\"(min-width:500px)\")\n    if (media.matches) { // 媒体查询\n        const BASE_URL = 'http://s.cn.bing.net'\n        request().then(res=>{\n            console.log('数据获取成功 ', res.images)\n            for(let i = 0; i < res.images.length; i++){\n                bodyBackgroundUrl[i] = BASE_URL + res.images[i].url\n                picCopyright[i] = res.images[i].copyright\n                copyrightLink[i] = res.images[i].copyrightlink\n            }\n            $('.copyright .url').attr('href',`${copyrightLink[picIndex]}`)\n            $('.copyright .url .text').text(`${picCopyright[picIndex]}`)\n            $(document).trigger('onRequest');\n        })\n    }else{\n        $('.globalFooter').remove()\n        $('body').css(\"background-image\",\"url('https://api.dujin.org/bing/m.php')\")\n    }     \n})\n\n\nconst removePrefix = (url) =>{\n    return url.replace('https://', '')\n        .replace('http://', '')\n        .replace('www.', '')\n        .replace(/\\/.*/, '') //用正则表达式 删除 / 开头的内容\n}\n\nconst render = () =>{\n    $siteList.find('li:not(.last)').remove()\n    hashMap.forEach((node, index)=>{\n        const $li = $(`\n        <li>\n            \n            <div class=\"site\">\n                <div class=\"logo\">${removePrefix(node.url)[0].toUpperCase()}</div>\n                <div class=\"link\">${removePrefix(node.url)}</div>\n                <div class=\"close\">\n                    <svg class=\"icon\">\n                        <use xlink:href=\"#icon-quxiao\"></use>\n                    </svg>\n                </div>\n            </div>\n        \n        </li>`\n        ).insertBefore($lastLi)\n        $li.on('click', ()=>{\n            window.open(node.url)\n        })\n        $li.on('click', '.close', (e)=>{\n            e.stopPropagation() //阻止冒泡\n            hashMap.splice(index, 1)\n            render()\n        })\n    })\n}\n\nrender()\n$('.addButton')\n    .on('click',()=>{\n        let url = window.prompt(\"请输入添加的网址\")\n        if(url.indexOf('http') !== 0){\n            url = 'https://' + url\n        }\n        console.log(url)\n        hashMap.push({\n            logoType: \"text\",\n            url: url\n        })\n        render()\n    })\n$('.close')\n.on('click',()=>{\n    console.log('close被点击')\n    \n})\n\n/* \n$(document).on('keypress', (e)=>{\n    const {key} = e\n    for(let i=0; i<hashMap.length; i++){\n        if(hashMap[i].logo.toLowerCase() === key){\n            window.open(hashMap[i].url)\n        }\n    }\n}) */ //禁用了键盘导航\n\n$('#baidu').on('click', ()=>{\n    if($('#baidu').attr('class') === 'inactive'){\n        $('#baidu').attr('class','active')\n        $('#google').attr('class','inactive')\n        \n        $('.searchForm').attr('action','https://www.baidu.com/s')\n        .children('input').attr('name','wd')\n        \n    }\n})\n$('#google').on('click', ()=>{\n    if($('#google').attr('class') === 'inactive'){\n        $('#google').attr('class','active')\n        $('#baidu').attr('class','inactive')\n\n        $('.searchForm').attr('action','https://www.google.com/search')\n        .children('input').attr('name','q')\n    }\n})\n\nlet picIndex = 0\nfunction renderButtonColor(){\n    if(picIndex === 0){\n        $('.previous').css(\"opacity\",\"0.5\")\n        $('.next').css(\"opacity\",\"1\")\n    }else if(picIndex === 6){\n        $('.previous').css(\"opacity\",\"1\")\n        $('.next').css(\"opacity\",\"0.5\")\n    }else{\n        $('.previous').css(\"opacity\",\"1\")\n        $('.next').css(\"opacity\",\"1\")\n    }\n}\n\n//监听onRequest,获取url数据，获取后渲染\n\n$(document).bind('onRequest',() =>{\n    //首次打开显示第一张图\n    $('body').css(\"background-image\",`url('${bodyBackgroundUrl[picIndex]}')`)\n    renderButtonColor()\n    //点击上一张图片\n    $('.previous').on('click',()=>{\n        if(picIndex > 0){\n            picIndex --\n            renderButtonColor()\n            $('body').css(\"background-image\",`url('${bodyBackgroundUrl[picIndex]}')`)\n            $(document).trigger('picIndexChange')\n        }       \n    })\n    //点击下一张图片\n    $('.next').on('click',()=>{\n        if(picIndex < 6){\n            picIndex ++\n            renderButtonColor()\n            $('body').css(\"background-image\",`url('${bodyBackgroundUrl[picIndex]}')`)\n            $(document).trigger('picIndexChange')\n        }\n    })    \n});\n\n\n$(document).bind('picIndexChange',() =>{\n    $('.copyright .url').attr('href',`${copyrightLink[picIndex]}`)\n    $('.copyright .url .text').text(`${picCopyright[picIndex]}`)\n})\n\n//localStorage\nwindow.onbeforeunload = () =>{\n    const string = JSON.stringify(hashMap)\n    localStorage.setItem('x', string)\n}"]}